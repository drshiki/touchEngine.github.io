<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>
			Dam.Moe
		</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta name="author" content="JameDam">
		<meta name="keywords" content="JameDam, Dam, dam, Dam's Blog, dam.moe, touchengine, te">
		<meta name="description" content="well, master isn't at home, as you pleases, :-)">
		<link rel="alternate" type="application/rss+xml" title="Dam's Blog" href="http://www.dam.moe/rss.xml">
	</head>
	<body>
		<h1><font face="Times New Roman,Impact,Comic Sans MS,Tahoma" color="#000000">Dam's Blog
			<a href="../rss.xml"><img src="../32px-Feed-icon.svg.png" alt="../32px-Feed-icon.svg.png"></a>
			<a href="https://github.com/login?return_to=%2FtouchEngine"><img src="../32px-Github-icon.png" alt="../32px-Github-icon.png"></a>
		</font></h1>
		<table>
			<tr>
				<th><ul><li><font face = "Courier New,Tahoma" size="4"><a href="../computer science.html">computer science</a></font></li></ul></th>
				<th><ul><li><font face = "Courier New,Tahoma" size="4"><a href="../culture.html">culture</a></font></li></ul></th>
				<th><ul><li><font face = "Courier New,Tahoma" size="4"><a href="../health.html">health</a></font></li></ul></th>
				<th><ul><li><font face = "Courier New,Tahoma" size="4"><a href="../reading list.html">reading list</a></font></li></ul></th>
				<th><ul><li><font face = "Courier New,Tahoma" size="4"><a href="../mulife.html">mulife</a></font></li></ul></th>
				<th><ul><li><font face = "Courier New,Tahoma" size="4"><a href="../profile.html">profile</a></font></li></ul></th>
			</tr>
		</table>
		<hr size="2" width = "70%" align="left">
		<div id ="content">
		<table width="70%">
		<tr><td>
			<h3>Personal collection for C</h3>
			<p>This article is about some my study notes, and I write down these for preventing forgetting when want to ues, and maybe this page is useful for your work or interview of your ideal work or study for C, or not. whatever, it is worth remaining some thing for my study experience in C, and every topic description have a copy of compileable and executable code for any compiler meeting ANSI C99(if not specific). and I will update this page continuedly.</p>
			<p>exchange the two values of two variable without the temporary variable</p>
			<pre>
				#include &lt;stdio.h&gt;
				int main()
				{
					int a=1,b=2;
					b=a^b;
					a=a^b;
					b=a^b;
					printf("a = %d, b = %d", a, b);//a = 2; b = 1
					return 0;
				}
			</pre>
			<p>get the file size through the standard funtions in a quick way</p>
			<pre>
			#include &lt;stdio.h&gt;
			int main()
			{
				FILE *fp = fopen("test.txt","r");
				/* test.txt contains the following content 
				 * hello world! this is a test file.
				*/
				
				if(fp){
					if(!fseek(fp, 0, SEEK_END))
						printf("%ld", ftell(fp)); //the output is file size
				}
				
				return 0;
			}			
			</pre>
			<p>array's special repretentation</p>
			<pre>
			#include &lt;stdio.h&gt;
			#include &lt;string.h&gt;
			int main()
			{
				for(int i = 0; i < strlen("mary");i++)
					printf("%c\t%c\n", "Mary"[i],i["Mary"]);
				/* the output is folow
				 * M    M
				 * a    a
				 * r    r
				 * y    y
				 */
				return 0;
			}
			</pre>
			<p>magical operator effect</p>
			<pre>
			#include &lt;stdio.h&gt;
			int main()
			{
				int a = 10, b = 20;
				printf("a = %d\n",-~a); // -~a == a+=1;
				printf("b = %d\n",~-b); // ~-b == b-=1;
				return 0;
			}
			</pre>
			<p>left shift operator's equality</p>
			<pre>
			#include &lt;stdio.h&gt;
			int main()
			{
				int a=7;
				printf("a = %d", a<<4); // a << n == a*2^n;
				return 0;
			}			
			</pre>
			<p>get the prime number amount by sieve method</p>
			<pre>
			#include &lt;math.h&gt;
			#include &lt;stdio.h&gt;
			#include &lt;stdlib.h&gt;
			#include &lt;stdbool.h&gt;
			#include &lt;time.h&gt;
			#include &lt;string.h&gt;

			#define N 1000000000LU

			bool number[N+1LU];
			int main(){
				
				unsigned long num = N - 1LU;
				clock_t start, end;
				
				memset(number, 1U, sizeof(bool)*(N+1));
				number[1] = 0U;

				start = clock();
				
				for (unsigned long i = 2LU; i <= N; i++){
					if(!number[i])
						continue;
					for (unsigned long j = i; j*i <= N; j++){
							if(number[j*i]){
								number[j*i] = 0u;
								num--;		
							}
					}
				}

				end = clock();
				printf("from 2 to %lu has prime-count %lu, spends %f\n", N, num, (double)((end-start)/CLOCKS_PER_SEC));
				return 0;
			}		
			</pre>
			<p>use higher order function by function pointer</p>
			<pre>
			#include &lt;stdio.h&gt;

			void map(int *array, int length, int (*fun)(int))
			{
				for(int i =0; i < length; i++)
					array[i] = fun(array[i]);
			}

			void print_array(int *array, int length){
				for(int i = 0; i < length; i++)
					printf("%d ",array[i]);
				printf("\n");
			}

			int double_value(int num){
				return num * 2;
			}

			int main()
			{
				int array[5] = {2,3,5,7,11};
				print_array(array, 5);
				map(array, 5, double_value);
				print_array(array, 5);
			}
			</pre>
			<p>occur Sine curve in CPU utilization</p>
			<p>currying in C(just for gcc extension)</p>
			<pre>
			#include &lt;stdio.h&gt;

			typedef int (*one_var_func) (int);

			one_var_func partial (int a) {
				int g (int b) {
					return a + b;
				}
				return g;
			}

			int main () {
				int a = 3;
				int b = 6;
				one_var_func f = partial(a);
				
				printf ("%d\n", f(b));
				
				return 0;
			}
			</pre>
			<p>judge the odd or the even</p>
			<pre>
			#include &lt;stdio.h&gt;
			int main(){
				int odd = 0, even = 0;
				for (int i = 0; i<=100; i++){
					if (i&1 == 1)
						odd++;
					else
						even++;
				}
				return 0;
			}
			</pre>
			<p>quick sqrt</p>
			<pre>
			#include &lt;stdio.h&gt;

			float Q_rsqrt(float number)
			{ 
				long i;
				float x2, y; 
				const float threehalfs = 1.5F; 
				x2 = number * 0.5F; 
				y  = number;	
				i = *(long*)&y;                       // evil floating point bit level hacking 
				i = 0x5f3759df - (i >> 1);               // what the fuck? 
				y = *(float*)&i;	
				y = y * (threehalfs - (x2 * y * y));   // 1st iteration 
				//	y  = y * ( threehalfs - ( x2 * y * y ) );   // 2nd iteration, this can be removed 
				return y; 
			}

			long Q_sqrt(long x) 
			{ 
				return x*Q_rsqrt(x)+0.5;
			}

			main(){
				float a = 100;
				printf("%ld", Qsqrt(a));
			}			
			</pre>
			<p>exchange two number' of hex</p>
			<pre>
			#include &lt;stdio.h&gt;
			int main(){
				int a = 0x16;
				
				a=((a&0x0F)<<4 | (a&0xF0)>>4);
				printf("%x",a);
				
				return 0;
			}				
			</pre>
			<p>get and output the PI</p>
			<pre>
			#include &lt;stdio.h&gt;

			int a=10000,b,c=2800,d,e,f[2801],g;
			main()
			{
				for(;b-c;)
				f[b++]=a/5; 
				for(;d=0,g=c*2;c-=14,printf("%.4d",e+d/a),e=d%a)
				for(b=c;d+=f[b]*a, f[b]=d%--g, d/=g--,--b; d*=b){}
			}
			</pre>
		</td></tr>
		</table>
		</div>
		<hr size="2" width = "70%" align="left">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'dammoe';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>		
		<div id = "classify-by-month"><font size="2"><i>
			<a href="">Sep 2015(5)</a>
			<a href="">Oct 2015(0)</a>
		</i></font></div>
		
		<div><font face = "Tahoma,Courier New">
			<a href="">Chinese version</a>&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="">Japanese Version</a>&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="">license</a></font> <br>
			<font size = "2">touchengine.github.io(dam.moe) since 2014, version 0.3.0(09. 15 2015),contact by <b>te#dam.moe</b></font>
		</div>
	</body>
</html>